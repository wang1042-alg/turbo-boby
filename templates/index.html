<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beacon_English è¯¾ç¨‹å®‰æ’ç³»ç»Ÿ</title>
    <!-- å¼•å…¥ Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- å¼•å…¥ Bootstrap Datepicker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="../static/style.css">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <!-- ğŸ”¹ æ·»åŠ  Logo -->
        <div class="text-center mb-3">
            <img src="../static/logo.png" alt="Beacon_English Logo" class="me-3" style="height: 100px;">
        </div>
        <h1 class="text-center mb-4">è¯¾ç¨‹å®‰æ’ç³»ç»Ÿ</h1>
    

        {% if error_message %}
        <div class="alert alert-danger text-center" role="alert">
            {{ error_message }}
        </div>
        {% endif %}


        <!-- è¡¨å•éƒ¨åˆ† -->
        <form method="POST" id="schedule-form" class="bg-white p-4 rounded shadow" {% if lesson_dates %}style="display: none;"{% endif %}>
            <div class="mb-3">
                <label class="form-label">ğŸ“Œ è¯¾ç¨‹å¼€å§‹æ—¥æœŸ:</label>
                <input type="text" class="form-control datepicker" name="start_date" required>
            </div>

            <div class="mb-3">
                <label class="form-label">ğŸ“š è¯¾ç¨‹æ€»è¯¾æ—¶æ•°:</label>
                <input type="number" name="total_lessons" class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">ğŸ”„ æ¯å‘¨ä¸Šè¯¾æ¬¡æ•°:</label>
                <select name="weekly_frequency" class="form-select" required>
                    <option value="1">æ¯å‘¨ 1 æ¬¡</option>
                    <option value="2">æ¯å‘¨ 2 æ¬¡</option>
                    <option value="3">æ¯å‘¨ 3 æ¬¡</option>
                    <option value="4">æ¯å‘¨ 4 æ¬¡</option>
                    <option value="5">æ¯å‘¨ 5 æ¬¡</option>
                    <option value="6">æ¯å‘¨ 6 æ¬¡</option>
                    <option value="7">æ¯å¤©</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">â³ æ¯æ¬¡è¯¾ç¨‹æ—¶é•¿ï¼ˆå°æ—¶ï¼‰:</label>
                <select name="lesson_duration" class="form-select" required>
                    <option value="0.5">0.5 å°æ—¶</option>
                    <option value="1">1 å°æ—¶</option>
                    <option value="1.5">1.5 å°æ—¶</option>
                    <option value="2">2 å°æ—¶</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">ğŸ‘©â€ğŸ« æ•™å¸ˆå¯ç”¨æ—¶é—´æ®µ:</label>
                <div class="row">
                    <div class="col">
                        <label>å¼€å§‹æ—¶é—´:</label>
                        <input type="number" class="form-control" name="teacher_start" value="{{ teacher_start or 6 }}" min="0" max="23">
                    </div>
                    <div class="col">
                        <label>ç»“æŸæ—¶é—´:</label>
                        <input type="number" class="form-control" name="teacher_end" value="{{ teacher_end or 21 }}" min="0" max="23">
                    </div>
                </div>
            </div>
            
            <div class="mb-3">
                <label class="form-label">ğŸ“ å­¦ç”Ÿå¯ç”¨æ—¶é—´æ®µ:</label>
                <div class="row">
                    <div class="col">
                        <label>å¼€å§‹æ—¶é—´:</label>
                        <input type="number" class="form-control" name="student_start" value="{{ student_start or 8 }}" min="0" max="23">
                    </div>
                    <div class="col">
                        <label>ç»“æŸæ—¶é—´:</label>
                        <input type="number" class="form-control" name="student_end" value="{{ student_end or 21 }}" min="0" max="23">
                    </div>
                </div>
            </div>
            
            <div class="mb-3">
                <label class="form-label">ğŸŒ é€‚ç”¨åœ°åŒº:</label><br>
                <div class="form-check form-check-inline">
                    <input type="checkbox" name="selected_regions" value="ä¸Šæµ·" class="form-check-input">
                    <label class="form-check-label">ä¸Šæµ·</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="checkbox" name="selected_regions" value="å¸ƒé‡Œæ–¯ç­" class="form-check-input">
                    <label class="form-check-label">å¸ƒé‡Œæ–¯ç­</label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100">ğŸ“Š ç”Ÿæˆè¯¾ç¨‹è¡¨</button>
        </form>

        <!-- è¯¾ç¨‹å®‰æ’ä¿¡æ¯ï¼ˆæäº¤åæ˜¾ç¤ºï¼‰ -->
        {% if lesson_dates %}
        <div id="result-section">
            <div class="bg-white p-4 rounded shadow mt-4">
                <h2 class="text-center">âœ… è¯¾ç¨‹å®‰æ’ä¿¡æ¯</h2>
                <p><strong>ğŸ“… è¯¾ç¨‹å¼€å§‹æ—¥æœŸ:</strong> {{ start_date }}</p>
                <p><strong>ğŸ“š è¯¾ç¨‹æ€»è¯¾æ—¶æ•°:</strong> {{ total_lessons }} èŠ‚è¯¾</p>
                <p><strong>ğŸ”„ æ¯å‘¨ä¸Šè¯¾æ¬¡æ•°:</strong> {{ weekly_frequency }} æ¬¡</p>
                <p><strong>â³ æ¯æ¬¡è¯¾ç¨‹æ—¶é•¿:</strong> {{ lesson_duration }} å°æ—¶</p>
                <p><strong>ğŸŒ é€‚ç”¨åœ°åŒº:</strong> {{ ", ".join(selected_regions) }}</p>
            </div>
        
            <!-- è¯¾ç¨‹æ—¶é—´è¡¨ -->
            <h2 class="text-center mt-4">ğŸ“… è¯¾ç¨‹æ—¶é—´è¡¨</h2>
            <table class="table table-striped table-bordered">
                <tr>
                    <th>æ•™å¸ˆæ—¶é—´ï¼ˆæ¸¥å¤ªåï¼‰</th>
                    {% if show_shanghai %}
                    <th>å­¦ç”Ÿæ—¶é—´ï¼ˆä¸Šæµ·ï¼‰</th>
                    {% endif %}
                    {% if show_brisbane %}
                    <th>å­¦ç”Ÿæ—¶é—´ï¼ˆå¸ƒé‡Œæ–¯ç­ï¼‰</th>
                    {% endif %}
                </tr>
                {% for i in range(lesson_dates|length) %}
                <tr>
                    <td>{{ lesson_dates[i].strftime('%Y-%m-%d %H:%M') }}</td>
                    {% if show_shanghai %}
                    <td>{{ lesson_shanghai[i] }}</td>
                    {% endif %}
                    {% if show_brisbane %}
                    <td>{{ lesson_brisbane[i] }}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </table>

            <!-- é‡æ–°é€‰æ‹©æŒ‰é’® -->
            <button class="btn btn-secondary w-100 mt-3" onclick="resetForm()">ğŸ”„ é‡æ–°é€‰æ‹©</button>
        </div>
        {% endif %}

    <!-- Bootstrap & Datepicker JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    <script>
        function resetForm() {
            document.getElementById("schedule-form").style.display = "block"; // é‡æ–°æ˜¾ç¤ºè¡¨å•
            document.getElementById("result-section").style.display = "none"; // éšè—è¯¾ç¨‹å®‰æ’
    
            // æ¸…ç©ºè¡¨å•æ•°æ®
            document.querySelector('form').reset();
        }

        $(document).ready(function() {
        $('.datepicker').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            todayHighlight: true
        });
    });
    </script>
    
</body>
</html>
